
resources:
  containers:
  - container: crops_poky
    image: 'auto3000/poky'
    env:
      LC_ALL: en_US.UTF-8
      LANG: en_US.UTF-8

jobs:
- job: build_qemux86_64
  displayName: 'build_qemux86_64'
  timeoutInMinutes: 0
  pool:
    vmImage: 'ubuntu-16.04'
  container: crops_poky
  steps:
    - script: |
        source init.sh qemux86-64
        echo 'SCONF_VERSION = "1"' > conf/site.conf
        echo 'SSTATE_DIR ?= "/tmp/sstate-cache"' >> conf/site.conf
        echo 'DL_DIR ?= "/tmp/downloads"' >> conf/site.conf
        bitbake pedalpi-dev-platform
- job: build_raspberrypi2
  displayName: 'build_raspberrypi2'
  timeoutInMinutes: 0
  pool:
    vmImage: 'ubuntu-16.04'
  container: crops_poky
  steps:
    - script: |
        source init.sh raspberrypi2
        echo 'SCONF_VERSION = "1"' > conf/site.conf
        echo 'SSTATE_DIR ?= "/tmp/sstate-cache"' >> conf/site.conf
        echo 'DL_DIR ?= "/tmp/downloads"' >> conf/site.conf
        bitbake pedalpi-dev-platform


